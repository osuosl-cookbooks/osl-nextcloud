# DO NOT EDIT THIS FILE DIRECTLY. To override any element of the
# packaged ownCloud configuration, create a new /etc/httpd/nextcloud/
# file which will be read later than 'nextcloud.conf'.
#
# As the initial setup wizard is active upon installation, access is
# initially allowed only from localhost. *AFTER* configuring the
# installation correctly and creating the admin account, to allow
# access from any host, do this:
#
# ln -s /etc/httpd/nextcloud/nextcloud-access.conf.avail /etc/httpd/conf.d/z-nextcloud-access.conf

Alias /nextcloud/apps-appstore /var/lib/nextcloud/apps
Alias /nextcloud/assets /var/lib/nextcloud/assets
Alias /nextcloud /usr/share/nextcloud

# Allows compliant CalDAV / CardDAV clients to be configured using only
# the domain name. For more details see # http://tools.ietf.org/html/rfc6764

Redirect 301 /.well-known/carddav /nextcloud/remote.php/carddav
Redirect 301 /.well-known/caldav /nextcloud/remote.php/caldav
Redirect 301 /.well-known/webdav /nextcloud/remote.php/webdav

<Directory /usr/share/nextcloud/>
    Include nextcloud/nextcloud-auth-local.inc
    Include nextcloud/nextcloud-defaults.inc
    <FilesMatch ^(\.|autotest|occ|issue|indie|db_|console).*>
        Include nextcloud/nextcloud-auth-none.inc
    </FilesMatch>
</Directory>

<Directory /var/lib/nextcloud/apps/>
    Include nextcloud/nextcloud-auth-local.inc
    Include nextcloud/nextcloud-defaults.inc
</Directory>

<Directory /var/lib/nextcloud/assets/>
    Include nextcloud/nextcloud-auth-local.inc
    Include nextcloud/nextcloud-defaults.inc
</Directory>

# For safety, explicitly deny any access to these locations.
# Upstream's .htaccess does something similar with mod_rewrite.

<Directory /var/lib/nextcloud/data/>
    Include nextcloud/nextcloud-auth-none.inc
</Directory>

<DirectoryMatch /usr/share/nextcloud/(3rdparty|lib|config|templates)/>
    Include nextcloud/nextcloud-auth-none.inc
</DirectoryMatch>
